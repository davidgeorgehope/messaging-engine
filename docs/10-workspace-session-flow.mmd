graph TD
    A[User creates session] --> B[createSession]
    B --> C[Auto-name from pain point]
    B --> D[startSessionGeneration]
    D --> E[Create generation_jobs row]
    D --> F[Set MODEL_PROFILE]
    D --> G[Fire pipeline async]
    G --> H[Pipeline executes]
    H --> I["extractInsights + nameSessionFromInsights"]
    H --> J["Research + Generate + Score"]
    J --> K["storeVariant for each asset Ã— voice"]
    K --> L["createInitialVersions â†’ v1"]
    L --> M["Session status: completed"]
    M --> N[User refines via actions/chat]
    N --> O[New versions created]
